
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="">
	<meta name="author" content="">
	<!-- <link rel="shortcut icon" href="../../assets/ico/favicon.png"> -->

	<title>079: n-Queens Completion Problem and Excluded Diagonals n-Queens Problem</title>

	<!-- Bootstrap core CSS -->
	<link href="/bootstrap/css/bootstrap.css" rel="stylesheet">

	<link href="/css/main.css" rel="stylesheet">
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js" ></script>

	<!-- Enable table sorting -->
	<script src="/js/tablesorter/jquery.tablesorter.min.js"></script>
	<link rel="stylesheet" href="/js/tablesorter/blue/style.css" type="text/css"/>
	<script type="text/javascript">
	$(function() {
		$(".tablesorter").tablesorter();
	});
	</script>

	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML.js">
	MathJax.Hub.Config({
	  	tex2jax: {
	    inlineMath: [['$','$'], ['\\(','\\)']],
	    processEscapes: true
	  	}
	});
	</script>


</head>

<body>

	<ol class="breadcrumb">
  	  <li><a href="/">CSPLib</a></li>

  <li><a href="/Problems">Problems</a></li>
  <li><a href="/Problems/prob079">prob079</a></li>
	</ol>

	<div class="container">

		<div class="page-header">
			<h1>079: n-Queens Completion Problem and Excluded Diagonals n-Queens Problem</h1>


<!-- macro to Not made a link if on the page the link links to -->


<header class="nav-header">
<div class="nav-container">
  <nav class="nav">
  <ul>
     	<li><a href="" class='current-item'>Specification</a></li>

     	<li><a href="/Problems/prob079/data">Data files</a></li>

     	<li><a href="/Problems/prob079/results">Results</a></li>

     	<li><a href="/Problems/prob079/references">References</a></li>

     	<li><a href="/Problems/prob079/models">Models</a></li>

     	<li><a href="/Problems/prob079/cite">Cite</a></li>

    <li><a href="/Problems/prob079.json" >Json</a></li>

    <li style="float:right"><a href="https://github.com/csplib/csplib/blob/master/Problems/prob079/specification.md">Edit Page</a></li>
  </ul>
  </nav>
</div>
</header>


		</div>


<p class='proposed'>
Proposed by Ian Gent
</p>

<h1>$n$-Queens Completion Problem</h1>
<p>The <span> <a href="/Problems/prob054">N-Queens</a></span> Problem, <span> <a href="/Problems/prob054">[prob054]</a></span>, suffers from the problem that its complexity is trivial as a decision problem.<br />
The n-Queens Completion and Blocked n-Queens problems are variants of <span> <a href="/Problems/prob054">N-Queens</a></span> which have been proven to
be NP-Complete as decision problems and #P-Complete as counting problems.</p>
<p><center>
<figure>
  <img src="assets/nqc1850.png" alt="An instance of n-Queens Completion" width="300" height="300">
  <figcaption>An instance of n-Queens Completion from 1850</figcaption>
</figure>
</center></p>
<p>For the $n$-Queens Completion Problem, as well as board size $n$, one is given some number of queens placed 
on the board already. The problem is to provide a solution to the $n$-Queens problem containing all those queens. I.e. a superset of the preplaced queens of size $n$ and with no two queens on the same row, column, or diagonal.  (If any two of the preplaced queens attack each other it is considered to be trivially unsolvable).</p>
<p>The image shows an example problem, originating in 1850<span> <a class="bibref" data-bibfragment="Nauck1850a" href="/Problems/prob079/references/#Nauck1850a">[Nauck1850a]</a></span>.  Can you place the other 6 queens to give a solution to the 8-Queens problem?  And in how many ways is this possible?  The answers are shown below.</p>
<h1>Excluded Diagonals $n$-Queens Problem</h1>
<p>The Excluded Diagonals Problem is a closely related problem where, given an $n \times n$ board, only certain rows and columns are allowed and certain diagonals are excluded. 
For rows and columns, a subset of rows and columns are specified which are allowed. The subsets must be the same size.
A sum diagonal is the set of squares where the sum of the row and column indexes of the squares is constant.  A difference diagonal is the set of squares where the difference between the row and column indexes is constant.<br />
For the Excluded Diagonals Problem, we are given $n$ and a set of diagonals, each of which is either a sum diagonal or a difference diagonal. A solution is a set of queens with exactly one queen in each of the allowed rows and columns, and where where no queen is placed on one of the<br />
excluded diagonals.</p>
<h1>Relation between the two problems</h1>
<p>The two problems here are so similar it is best to think of them as the same problem, as processing to flip between them is very simple. </p>
<p>To go from $n$-Queens Completion to Excluded Diagonals is very easy: simply allow only rows and columns with no queens preplaced, and exclude any diagonals (both sum and diagonal) on which there are preplaced queens.  </p>
<p>The other direction is more complex but still fast, following a construction in<span> <a class="bibref" data-bibfragment="nqueenscompletion" href="/Problems/prob079/references/#nqueenscompletion">[nqueenscompletion]</a></span>. It is implemented in the python files 
<a href="models/diagtoqueens.py.html"><a href="http://diagtoqueens.py">diagtoqueens.py</a></a> and 
<a href="models/queens-diag-transform.py.html"><a href="http://queens-diag-transform.py">queens-diag-transform.py</a></a>.</p>
<p>The two problems are closely related to <span> <a href="/Problems/prob080">Blocked n-Queens Problem</a></span>, <span> <a href="/Problems/prob080">[prob080]</a></span>.</p>
<h1>Random Instance Generators</h1>
<p>Python generators are available to implement the models from the paper<span> <a class="bibref" data-bibfragment="nqueenscompletion" href="/Problems/prob079/references/#nqueenscompletion">[nqueenscompletion]</a></span>. 
The generator for random placement of queens for of n-Queens Completion is not recommended as it does not seem to produce hard instances. 
<a href="data/queens-diag-gen.py.html">The generator for random Excluded Diagonals n-Queens instances</a>
does appear to generate hard instances.  </p>
<p>Note that the generator for Excluded Diagonals always allows all rows and columns, so those are not outputted. It also offsets the difference diagonals by n-1 so that all numbers are non-negative. Also it generates a maximal set of diagonals which retain the property that there are at least k squares left in each row and column (e.g. k=4). The generator is designed so that, if you want fewer diagonals than that maximal
number, e.g. $d$, you can simply take the first $d$ diagonals and get a probabilistically valid sample.</p>
<h1>References</h1>
<p>The n-Queens Completion problem was proposed in 1850<span> <a class="bibref" data-bibfragment="Nauck1850a" href="/Problems/prob079/references/#Nauck1850a">[Nauck1850a]</a></span></p>
<p>The Excluded Diagonals Problem was proposed by<span> <a class="bibref" data-bibfragment="nqueenscompletion" href="/Problems/prob079/references/#nqueenscompletion">[nqueenscompletion]</a></span></p>
<p>Both problems were proved NP-Complete and #P-Complete by<span> <a class="bibref" data-bibfragment="nqueenscompletion" href="/Problems/prob079/references/#nqueenscompletion">[nqueenscompletion]</a></span></p>
<p><center>
<figure>
  <img src="assets/nqc1850sol1.png" alt="An instance of n-Queens Completion" width="300" height="300">
  <img src="assets/nqc1850sol2.png" alt="An instance of n-Queens Completion" width="300" height="300">
  <figcaption>The Two Solutions to the n-Queens Completion from 1850</figcaption>
</figure>
</center></p>


	</div>



</div>

<div id="footer">

    <center><a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/80x15.png" /></a> This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>. </center>

</div>
  <!-- float footer to bottom of page -->
  <script>

    $(document).ready(function() {

     var docHeight = $(window).height();
     var footerHeight = $('#footer').height();
     var footerTop = $('#footer').position().top + footerHeight;

     if (footerTop + 20 < docHeight) {
      $('#footer').css('margin-top',  (docHeight - (footerTop + 20)) + 'px');
     }
    });
   </script>
</body>

</html>